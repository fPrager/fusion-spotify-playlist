// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.
import { fromFileUrl } from "../path.ts";
import { promisify } from "../internal/util.mjs";
export function symlink(target, path, typeOrCallback, maybeCallback) {
    target = target instanceof URL ? fromFileUrl(target) : target;
    path = path instanceof URL ? fromFileUrl(path) : path;
    const type = typeof typeOrCallback === "string" ? typeOrCallback : "file";
    const callback = typeof typeOrCallback === "function" ? typeOrCallback : maybeCallback;
    if (!callback) throw new Error("No callback function supplied");
    Deno.symlink(target, path, {
        type
    }).then(()=>callback(null), callback);
}
export const symlinkPromise = promisify(symlink);
export function symlinkSync(target, path, type) {
    target = target instanceof URL ? fromFileUrl(target) : target;
    path = path instanceof URL ? fromFileUrl(path) : path;
    type = type || "file";
    Deno.symlinkSync(target, path, {
        type
    });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE2Ny4wL25vZGUvX2ZzL19mc19zeW1saW5rLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG5pbXBvcnQgeyBDYWxsYmFja1dpdGhFcnJvciB9IGZyb20gXCIuL19mc19jb21tb24udHNcIjtcbmltcG9ydCB7IGZyb21GaWxlVXJsIH0gZnJvbSBcIi4uL3BhdGgudHNcIjtcbmltcG9ydCB7IHByb21pc2lmeSB9IGZyb20gXCIuLi9pbnRlcm5hbC91dGlsLm1qc1wiO1xuXG50eXBlIFN5bWxpbmtUeXBlID0gXCJmaWxlXCIgfCBcImRpclwiO1xuXG5leHBvcnQgZnVuY3Rpb24gc3ltbGluayhcbiAgdGFyZ2V0OiBzdHJpbmcgfCBVUkwsXG4gIHBhdGg6IHN0cmluZyB8IFVSTCxcbiAgdHlwZU9yQ2FsbGJhY2s6IFN5bWxpbmtUeXBlIHwgQ2FsbGJhY2tXaXRoRXJyb3IsXG4gIG1heWJlQ2FsbGJhY2s/OiBDYWxsYmFja1dpdGhFcnJvcixcbikge1xuICB0YXJnZXQgPSB0YXJnZXQgaW5zdGFuY2VvZiBVUkwgPyBmcm9tRmlsZVVybCh0YXJnZXQpIDogdGFyZ2V0O1xuICBwYXRoID0gcGF0aCBpbnN0YW5jZW9mIFVSTCA/IGZyb21GaWxlVXJsKHBhdGgpIDogcGF0aDtcblxuICBjb25zdCB0eXBlOiBTeW1saW5rVHlwZSA9IHR5cGVvZiB0eXBlT3JDYWxsYmFjayA9PT0gXCJzdHJpbmdcIlxuICAgID8gdHlwZU9yQ2FsbGJhY2tcbiAgICA6IFwiZmlsZVwiO1xuXG4gIGNvbnN0IGNhbGxiYWNrOiBDYWxsYmFja1dpdGhFcnJvciA9IHR5cGVvZiB0eXBlT3JDYWxsYmFjayA9PT0gXCJmdW5jdGlvblwiXG4gICAgPyB0eXBlT3JDYWxsYmFja1xuICAgIDogKG1heWJlQ2FsbGJhY2sgYXMgQ2FsbGJhY2tXaXRoRXJyb3IpO1xuXG4gIGlmICghY2FsbGJhY2spIHRocm93IG5ldyBFcnJvcihcIk5vIGNhbGxiYWNrIGZ1bmN0aW9uIHN1cHBsaWVkXCIpO1xuXG4gIERlbm8uc3ltbGluayh0YXJnZXQsIHBhdGgsIHsgdHlwZSB9KS50aGVuKCgpID0+IGNhbGxiYWNrKG51bGwpLCBjYWxsYmFjayk7XG59XG5cbmV4cG9ydCBjb25zdCBzeW1saW5rUHJvbWlzZSA9IHByb21pc2lmeShzeW1saW5rKSBhcyAoXG4gIHRhcmdldDogc3RyaW5nIHwgVVJMLFxuICBwYXRoOiBzdHJpbmcgfCBVUkwsXG4gIHR5cGU/OiBTeW1saW5rVHlwZSxcbikgPT4gUHJvbWlzZTx2b2lkPjtcblxuZXhwb3J0IGZ1bmN0aW9uIHN5bWxpbmtTeW5jKFxuICB0YXJnZXQ6IHN0cmluZyB8IFVSTCxcbiAgcGF0aDogc3RyaW5nIHwgVVJMLFxuICB0eXBlPzogU3ltbGlua1R5cGUsXG4pIHtcbiAgdGFyZ2V0ID0gdGFyZ2V0IGluc3RhbmNlb2YgVVJMID8gZnJvbUZpbGVVcmwodGFyZ2V0KSA6IHRhcmdldDtcbiAgcGF0aCA9IHBhdGggaW5zdGFuY2VvZiBVUkwgPyBmcm9tRmlsZVVybChwYXRoKSA6IHBhdGg7XG4gIHR5cGUgPSB0eXBlIHx8IFwiZmlsZVwiO1xuXG4gIERlbm8uc3ltbGlua1N5bmModGFyZ2V0LCBwYXRoLCB7IHR5cGUgfSk7XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsMEVBQTBFO0FBRTFFLFNBQVMsV0FBVyxRQUFRLGFBQWE7QUFDekMsU0FBUyxTQUFTLFFBQVEsdUJBQXVCO0FBSWpELE9BQU8sU0FBUyxRQUNkLE1BQW9CLEVBQ3BCLElBQWtCLEVBQ2xCLGNBQStDLEVBQy9DLGFBQWlDLEVBQ2pDO0lBQ0EsU0FBUyxrQkFBa0IsTUFBTSxZQUFZLFVBQVUsTUFBTTtJQUM3RCxPQUFPLGdCQUFnQixNQUFNLFlBQVksUUFBUSxJQUFJO0lBRXJELE1BQU0sT0FBb0IsT0FBTyxtQkFBbUIsV0FDaEQsaUJBQ0EsTUFBTTtJQUVWLE1BQU0sV0FBOEIsT0FBTyxtQkFBbUIsYUFDMUQsaUJBQ0MsYUFBbUM7SUFFeEMsSUFBSSxDQUFDLFVBQVUsTUFBTSxJQUFJLE1BQU0saUNBQWlDO0lBRWhFLEtBQUssT0FBTyxDQUFDLFFBQVEsTUFBTTtRQUFFO0lBQUssR0FBRyxJQUFJLENBQUMsSUFBTSxTQUFTLElBQUksR0FBRztBQUNsRSxDQUFDO0FBRUQsT0FBTyxNQUFNLGlCQUFpQixVQUFVLFNBSXJCO0FBRW5CLE9BQU8sU0FBUyxZQUNkLE1BQW9CLEVBQ3BCLElBQWtCLEVBQ2xCLElBQWtCLEVBQ2xCO0lBQ0EsU0FBUyxrQkFBa0IsTUFBTSxZQUFZLFVBQVUsTUFBTTtJQUM3RCxPQUFPLGdCQUFnQixNQUFNLFlBQVksUUFBUSxJQUFJO0lBQ3JELE9BQU8sUUFBUTtJQUVmLEtBQUssV0FBVyxDQUFDLFFBQVEsTUFBTTtRQUFFO0lBQUs7QUFDeEMsQ0FBQyJ9