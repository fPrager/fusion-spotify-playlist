// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.
/*
MIT License

Copyright (c) 2018 cryptocoinjs

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
 */ import { Buffer } from "../../buffer.ts";
import { pbkdf2Sync as pbkdf2 } from "./pbkdf2.ts";
const fixOpts = (opts)=>{
    const out = {
        N: 16384,
        p: 1,
        r: 8,
        maxmem: 32 << 20
    };
    if (!opts) return out;
    if (opts.N) out.N = opts.N;
    else if (opts.cost) out.N = opts.cost;
    if (opts.p) out.p = opts.p;
    else if (opts.parallelization) out.p = opts.parallelization;
    if (opts.r) out.r = opts.r;
    else if (opts.blockSize) out.r = opts.blockSize;
    if (opts.maxmem) out.maxmem = opts.maxmem;
    return out;
};
function blockxor(S, Si, D, Di, len) {
    let i = -1;
    while(++i < len)D[Di + i] ^= S[Si + i];
}
function arraycopy(src, srcPos, dest, destPos, length) {
    src.copy(dest, destPos, srcPos, srcPos + length);
}
const R = (a, b)=>a << b | a >>> 32 - b;
class ScryptRom {
    B;
    r;
    N;
    p;
    XY;
    V;
    B32;
    x;
    _X;
    constructor(b, r, N, p){
        this.B = b;
        this.r = r;
        this.N = N;
        this.p = p;
        this.XY = Buffer.allocUnsafe(256 * r);
        this.V = Buffer.allocUnsafe(128 * r * N);
        this.B32 = new Int32Array(16); // salsa20_8
        this.x = new Int32Array(16); // salsa20_8
        this._X = Buffer.allocUnsafe(64); // blockmix_salsa8
    }
    run() {
        const p = this.p | 0;
        const r = this.r | 0;
        for(let i = 0; i < p; i++)this.scryptROMix(i, r);
        return this.B;
    }
    scryptROMix(i, r) {
        const blockStart = i * 128 * r;
        const offset = (2 * r - 1) * 64;
        const blockLen = 128 * r;
        const B = this.B;
        const N = this.N | 0;
        const V = this.V;
        const XY = this.XY;
        B.copy(XY, 0, blockStart, blockStart + blockLen);
        for(let i1 = 0; i1 < N; i1++){
            XY.copy(V, i1 * blockLen, 0, blockLen);
            this.blockmix_salsa8(blockLen);
        }
        let j;
        for(let i2 = 0; i2 < N; i2++){
            j = XY.readUInt32LE(offset) & N - 1;
            blockxor(V, j * blockLen, XY, 0, blockLen);
            this.blockmix_salsa8(blockLen);
        }
        XY.copy(B, blockStart, 0, blockLen);
    }
    blockmix_salsa8(blockLen) {
        const BY = this.XY;
        const r = this.r;
        const _X = this._X;
        arraycopy(BY, (2 * r - 1) * 64, _X, 0, 64);
        let i;
        for(i = 0; i < 2 * r; i++){
            blockxor(BY, i * 64, _X, 0, 64);
            this.salsa20_8();
            arraycopy(_X, 0, BY, blockLen + i * 64, 64);
        }
        for(i = 0; i < r; i++){
            arraycopy(BY, blockLen + i * 2 * 64, BY, i * 64, 64);
            arraycopy(BY, blockLen + (i * 2 + 1) * 64, BY, (i + r) * 64, 64);
        }
    }
    salsa20_8() {
        const B32 = this.B32;
        const B = this._X;
        const x = this.x;
        let i;
        for(i = 0; i < 16; i++){
            B32[i] = (B[i * 4 + 0] & 0xff) << 0;
            B32[i] |= (B[i * 4 + 1] & 0xff) << 8;
            B32[i] |= (B[i * 4 + 2] & 0xff) << 16;
            B32[i] |= (B[i * 4 + 3] & 0xff) << 24;
        }
        for(i = 0; i < 16; i++)x[i] = B32[i];
        for(i = 0; i < 4; i++){
            x[4] ^= R(x[0] + x[12], 7);
            x[8] ^= R(x[4] + x[0], 9);
            x[12] ^= R(x[8] + x[4], 13);
            x[0] ^= R(x[12] + x[8], 18);
            x[9] ^= R(x[5] + x[1], 7);
            x[13] ^= R(x[9] + x[5], 9);
            x[1] ^= R(x[13] + x[9], 13);
            x[5] ^= R(x[1] + x[13], 18);
            x[14] ^= R(x[10] + x[6], 7);
            x[2] ^= R(x[14] + x[10], 9);
            x[6] ^= R(x[2] + x[14], 13);
            x[10] ^= R(x[6] + x[2], 18);
            x[3] ^= R(x[15] + x[11], 7);
            x[7] ^= R(x[3] + x[15], 9);
            x[11] ^= R(x[7] + x[3], 13);
            x[15] ^= R(x[11] + x[7], 18);
            x[1] ^= R(x[0] + x[3], 7);
            x[2] ^= R(x[1] + x[0], 9);
            x[3] ^= R(x[2] + x[1], 13);
            x[0] ^= R(x[3] + x[2], 18);
            x[6] ^= R(x[5] + x[4], 7);
            x[7] ^= R(x[6] + x[5], 9);
            x[4] ^= R(x[7] + x[6], 13);
            x[5] ^= R(x[4] + x[7], 18);
            x[11] ^= R(x[10] + x[9], 7);
            x[8] ^= R(x[11] + x[10], 9);
            x[9] ^= R(x[8] + x[11], 13);
            x[10] ^= R(x[9] + x[8], 18);
            x[12] ^= R(x[15] + x[14], 7);
            x[13] ^= R(x[12] + x[15], 9);
            x[14] ^= R(x[13] + x[12], 13);
            x[15] ^= R(x[14] + x[13], 18);
        }
        for(i = 0; i < 16; i++)B32[i] += x[i];
        let bi;
        for(i = 0; i < 16; i++){
            bi = i * 4;
            B[bi + 0] = B32[i] >> 0 & 0xff;
            B[bi + 1] = B32[i] >> 8 & 0xff;
            B[bi + 2] = B32[i] >> 16 & 0xff;
            B[bi + 3] = B32[i] >> 24 & 0xff;
        }
    }
    clean() {
        this.XY.fill(0);
        this.V.fill(0);
        this._X.fill(0);
        this.B.fill(0);
        for(let i = 0; i < 16; i++){
            this.B32[i] = 0;
            this.x[i] = 0;
        }
    }
}
export function scryptSync(password, salt, keylen, _opts) {
    const { N , r , p , maxmem  } = fixOpts(_opts);
    const blen = p * 128 * r;
    if (32 * r * (N + 2) * 4 + blen > maxmem) {
        throw new Error("excedes max memory");
    }
    const b = pbkdf2(password, salt, 1, blen, "sha256");
    const scryptRom = new ScryptRom(b, r, N, p);
    const out = scryptRom.run();
    const fin = pbkdf2(password, out, 1, keylen, "sha256");
    scryptRom.clean();
    return fin;
}
export function scrypt(password, salt, keylen, _opts, cb) {
    if (!cb) {
        cb = _opts;
        _opts = null;
    }
    const { N , r , p , maxmem  } = fixOpts(_opts);
    const blen = p * 128 * r;
    if (32 * r * (N + 2) * 4 + blen > maxmem) {
        throw new Error("excedes max memory");
    }
    try {
        const b = pbkdf2(password, salt, 1, blen, "sha256");
        const scryptRom = new ScryptRom(b, r, N, p);
        const out = scryptRom.run();
        const result = pbkdf2(password, out, 1, keylen, "sha256");
        scryptRom.clean();
        cb(null, result);
    } catch (err) {
        return cb(err);
    }
}
export default {
    scrypt,
    scryptSync
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vZGVuby5sYW5kL3N0ZEAwLjE2Ny4wL25vZGUvaW50ZXJuYWwvY3J5cHRvL3NjcnlwdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyIHRoZSBEZW5vIGF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuIE1JVCBsaWNlbnNlLlxuLypcbk1JVCBMaWNlbnNlXG5cbkNvcHlyaWdodCAoYykgMjAxOCBjcnlwdG9jb2luanNcblxuUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxub2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGUgXCJTb2Z0d2FyZVwiKSwgdG8gZGVhbFxuaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0c1xudG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbFxuY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdCBwZXJzb25zIHRvIHdob20gdGhlIFNvZnR3YXJlIGlzXG5mdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG5UaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpbiBhbGxcbmNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG5cblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbklNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UgQU5EIE5PTklORlJJTkdFTUVOVC4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFXG5BVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG5MSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgU09GVFdBUkUgT1IgVEhFIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEVcblNPRlRXQVJFLlxuICovXG5cbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCIuLi8uLi9idWZmZXIudHNcIjtcbmltcG9ydCB7IHBia2RmMlN5bmMgYXMgcGJrZGYyIH0gZnJvbSBcIi4vcGJrZGYyLnRzXCI7XG5pbXBvcnQgeyBIQVNIX0RBVEEgfSBmcm9tIFwiLi90eXBlcy50c1wiO1xuXG50eXBlIE9wdHMgPSBQYXJ0aWFsPHtcbiAgTjogbnVtYmVyO1xuICBjb3N0OiBudW1iZXI7XG4gIHA6IG51bWJlcjtcbiAgcGFyYWxsZWxpemF0aW9uOiBudW1iZXI7XG4gIHI6IG51bWJlcjtcbiAgYmxvY2tTaXplOiBudW1iZXI7XG4gIG1heG1lbTogbnVtYmVyO1xufT47XG5cbmNvbnN0IGZpeE9wdHMgPSAob3B0cz86IE9wdHMpID0+IHtcbiAgY29uc3Qgb3V0ID0geyBOOiAxNjM4NCwgcDogMSwgcjogOCwgbWF4bWVtOiAzMiA8PCAyMCB9O1xuICBpZiAoIW9wdHMpIHJldHVybiBvdXQ7XG5cbiAgaWYgKG9wdHMuTikgb3V0Lk4gPSBvcHRzLk47XG4gIGVsc2UgaWYgKG9wdHMuY29zdCkgb3V0Lk4gPSBvcHRzLmNvc3Q7XG5cbiAgaWYgKG9wdHMucCkgb3V0LnAgPSBvcHRzLnA7XG4gIGVsc2UgaWYgKG9wdHMucGFyYWxsZWxpemF0aW9uKSBvdXQucCA9IG9wdHMucGFyYWxsZWxpemF0aW9uO1xuXG4gIGlmIChvcHRzLnIpIG91dC5yID0gb3B0cy5yO1xuICBlbHNlIGlmIChvcHRzLmJsb2NrU2l6ZSkgb3V0LnIgPSBvcHRzLmJsb2NrU2l6ZTtcblxuICBpZiAob3B0cy5tYXhtZW0pIG91dC5tYXhtZW0gPSBvcHRzLm1heG1lbTtcblxuICByZXR1cm4gb3V0O1xufTtcblxuZnVuY3Rpb24gYmxvY2t4b3IoUzogQnVmZmVyLCBTaTogbnVtYmVyLCBEOiBCdWZmZXIsIERpOiBudW1iZXIsIGxlbjogbnVtYmVyKSB7XG4gIGxldCBpID0gLTE7XG4gIHdoaWxlICgrK2kgPCBsZW4pIERbRGkgKyBpXSBePSBTW1NpICsgaV07XG59XG5mdW5jdGlvbiBhcnJheWNvcHkoXG4gIHNyYzogQnVmZmVyLFxuICBzcmNQb3M6IG51bWJlcixcbiAgZGVzdDogQnVmZmVyLFxuICBkZXN0UG9zOiBudW1iZXIsXG4gIGxlbmd0aDogbnVtYmVyLFxuKSB7XG4gIHNyYy5jb3B5KGRlc3QsIGRlc3RQb3MsIHNyY1Bvcywgc3JjUG9zICsgbGVuZ3RoKTtcbn1cblxuY29uc3QgUiA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gKGEgPDwgYikgfCAoYSA+Pj4gKDMyIC0gYikpO1xuXG5jbGFzcyBTY3J5cHRSb20ge1xuICBCOiBCdWZmZXI7XG4gIHI6IG51bWJlcjtcbiAgTjogbnVtYmVyO1xuICBwOiBudW1iZXI7XG4gIFhZOiBCdWZmZXI7XG4gIFY6IEJ1ZmZlcjtcbiAgQjMyOiBJbnQzMkFycmF5O1xuICB4OiBJbnQzMkFycmF5O1xuICBfWDogQnVmZmVyO1xuICBjb25zdHJ1Y3RvcihiOiBCdWZmZXIsIHI6IG51bWJlciwgTjogbnVtYmVyLCBwOiBudW1iZXIpIHtcbiAgICB0aGlzLkIgPSBiO1xuICAgIHRoaXMuciA9IHI7XG4gICAgdGhpcy5OID0gTjtcbiAgICB0aGlzLnAgPSBwO1xuICAgIHRoaXMuWFkgPSBCdWZmZXIuYWxsb2NVbnNhZmUoMjU2ICogcik7XG4gICAgdGhpcy5WID0gQnVmZmVyLmFsbG9jVW5zYWZlKDEyOCAqIHIgKiBOKTtcbiAgICB0aGlzLkIzMiA9IG5ldyBJbnQzMkFycmF5KDE2KTsgLy8gc2Fsc2EyMF84XG4gICAgdGhpcy54ID0gbmV3IEludDMyQXJyYXkoMTYpOyAvLyBzYWxzYTIwXzhcbiAgICB0aGlzLl9YID0gQnVmZmVyLmFsbG9jVW5zYWZlKDY0KTsgLy8gYmxvY2ttaXhfc2Fsc2E4XG4gIH1cblxuICBydW4oKSB7XG4gICAgY29uc3QgcCA9IHRoaXMucCB8IDA7XG4gICAgY29uc3QgciA9IHRoaXMuciB8IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwOyBpKyspIHRoaXMuc2NyeXB0Uk9NaXgoaSwgcik7XG5cbiAgICByZXR1cm4gdGhpcy5CO1xuICB9XG5cbiAgc2NyeXB0Uk9NaXgoaTogbnVtYmVyLCByOiBudW1iZXIpIHtcbiAgICBjb25zdCBibG9ja1N0YXJ0ID0gaSAqIDEyOCAqIHI7XG4gICAgY29uc3Qgb2Zmc2V0ID0gKDIgKiByIC0gMSkgKiA2NDtcbiAgICBjb25zdCBibG9ja0xlbiA9IDEyOCAqIHI7XG4gICAgY29uc3QgQiA9IHRoaXMuQjtcbiAgICBjb25zdCBOID0gdGhpcy5OIHwgMDtcbiAgICBjb25zdCBWID0gdGhpcy5WO1xuICAgIGNvbnN0IFhZID0gdGhpcy5YWTtcbiAgICBCLmNvcHkoWFksIDAsIGJsb2NrU3RhcnQsIGJsb2NrU3RhcnQgKyBibG9ja0xlbik7XG4gICAgZm9yIChsZXQgaTEgPSAwOyBpMSA8IE47IGkxKyspIHtcbiAgICAgIFhZLmNvcHkoViwgaTEgKiBibG9ja0xlbiwgMCwgYmxvY2tMZW4pO1xuICAgICAgdGhpcy5ibG9ja21peF9zYWxzYTgoYmxvY2tMZW4pO1xuICAgIH1cblxuICAgIGxldCBqOiBudW1iZXI7XG4gICAgZm9yIChsZXQgaTIgPSAwOyBpMiA8IE47IGkyKyspIHtcbiAgICAgIGogPSBYWS5yZWFkVUludDMyTEUob2Zmc2V0KSAmIChOIC0gMSk7XG4gICAgICBibG9ja3hvcihWLCBqICogYmxvY2tMZW4sIFhZLCAwLCBibG9ja0xlbik7XG4gICAgICB0aGlzLmJsb2NrbWl4X3NhbHNhOChibG9ja0xlbik7XG4gICAgfVxuICAgIFhZLmNvcHkoQiwgYmxvY2tTdGFydCwgMCwgYmxvY2tMZW4pO1xuICB9XG5cbiAgYmxvY2ttaXhfc2Fsc2E4KGJsb2NrTGVuOiBudW1iZXIpIHtcbiAgICBjb25zdCBCWSA9IHRoaXMuWFk7XG4gICAgY29uc3QgciA9IHRoaXMucjtcbiAgICBjb25zdCBfWCA9IHRoaXMuX1g7XG4gICAgYXJyYXljb3B5KEJZLCAoMiAqIHIgLSAxKSAqIDY0LCBfWCwgMCwgNjQpO1xuICAgIGxldCBpO1xuICAgIGZvciAoaSA9IDA7IGkgPCAyICogcjsgaSsrKSB7XG4gICAgICBibG9ja3hvcihCWSwgaSAqIDY0LCBfWCwgMCwgNjQpO1xuICAgICAgdGhpcy5zYWxzYTIwXzgoKTtcbiAgICAgIGFycmF5Y29weShfWCwgMCwgQlksIGJsb2NrTGVuICsgaSAqIDY0LCA2NCk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCByOyBpKyspIHtcbiAgICAgIGFycmF5Y29weShCWSwgYmxvY2tMZW4gKyBpICogMiAqIDY0LCBCWSwgaSAqIDY0LCA2NCk7XG4gICAgICBhcnJheWNvcHkoQlksIGJsb2NrTGVuICsgKGkgKiAyICsgMSkgKiA2NCwgQlksIChpICsgcikgKiA2NCwgNjQpO1xuICAgIH1cbiAgfVxuXG4gIHNhbHNhMjBfOCgpIHtcbiAgICBjb25zdCBCMzIgPSB0aGlzLkIzMjtcbiAgICBjb25zdCBCID0gdGhpcy5fWDtcbiAgICBjb25zdCB4ID0gdGhpcy54O1xuXG4gICAgbGV0IGk7XG4gICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHtcbiAgICAgIEIzMltpXSA9IChCW2kgKiA0ICsgMF0gJiAweGZmKSA8PCAwO1xuICAgICAgQjMyW2ldIHw9IChCW2kgKiA0ICsgMV0gJiAweGZmKSA8PCA4O1xuICAgICAgQjMyW2ldIHw9IChCW2kgKiA0ICsgMl0gJiAweGZmKSA8PCAxNjtcbiAgICAgIEIzMltpXSB8PSAoQltpICogNCArIDNdICYgMHhmZikgPDwgMjQ7XG4gICAgfVxuXG4gICAgZm9yIChpID0gMDsgaSA8IDE2OyBpKyspIHhbaV0gPSBCMzJbaV07XG5cbiAgICBmb3IgKGkgPSAwOyBpIDwgNDsgaSsrKSB7XG4gICAgICB4WzRdIF49IFIoeFswXSArIHhbMTJdLCA3KTtcbiAgICAgIHhbOF0gXj0gUih4WzRdICsgeFswXSwgOSk7XG4gICAgICB4WzEyXSBePSBSKHhbOF0gKyB4WzRdLCAxMyk7XG4gICAgICB4WzBdIF49IFIoeFsxMl0gKyB4WzhdLCAxOCk7XG4gICAgICB4WzldIF49IFIoeFs1XSArIHhbMV0sIDcpO1xuICAgICAgeFsxM10gXj0gUih4WzldICsgeFs1XSwgOSk7XG4gICAgICB4WzFdIF49IFIoeFsxM10gKyB4WzldLCAxMyk7XG4gICAgICB4WzVdIF49IFIoeFsxXSArIHhbMTNdLCAxOCk7XG4gICAgICB4WzE0XSBePSBSKHhbMTBdICsgeFs2XSwgNyk7XG4gICAgICB4WzJdIF49IFIoeFsxNF0gKyB4WzEwXSwgOSk7XG4gICAgICB4WzZdIF49IFIoeFsyXSArIHhbMTRdLCAxMyk7XG4gICAgICB4WzEwXSBePSBSKHhbNl0gKyB4WzJdLCAxOCk7XG4gICAgICB4WzNdIF49IFIoeFsxNV0gKyB4WzExXSwgNyk7XG4gICAgICB4WzddIF49IFIoeFszXSArIHhbMTVdLCA5KTtcbiAgICAgIHhbMTFdIF49IFIoeFs3XSArIHhbM10sIDEzKTtcbiAgICAgIHhbMTVdIF49IFIoeFsxMV0gKyB4WzddLCAxOCk7XG4gICAgICB4WzFdIF49IFIoeFswXSArIHhbM10sIDcpO1xuICAgICAgeFsyXSBePSBSKHhbMV0gKyB4WzBdLCA5KTtcbiAgICAgIHhbM10gXj0gUih4WzJdICsgeFsxXSwgMTMpO1xuICAgICAgeFswXSBePSBSKHhbM10gKyB4WzJdLCAxOCk7XG4gICAgICB4WzZdIF49IFIoeFs1XSArIHhbNF0sIDcpO1xuICAgICAgeFs3XSBePSBSKHhbNl0gKyB4WzVdLCA5KTtcbiAgICAgIHhbNF0gXj0gUih4WzddICsgeFs2XSwgMTMpO1xuICAgICAgeFs1XSBePSBSKHhbNF0gKyB4WzddLCAxOCk7XG4gICAgICB4WzExXSBePSBSKHhbMTBdICsgeFs5XSwgNyk7XG4gICAgICB4WzhdIF49IFIoeFsxMV0gKyB4WzEwXSwgOSk7XG4gICAgICB4WzldIF49IFIoeFs4XSArIHhbMTFdLCAxMyk7XG4gICAgICB4WzEwXSBePSBSKHhbOV0gKyB4WzhdLCAxOCk7XG4gICAgICB4WzEyXSBePSBSKHhbMTVdICsgeFsxNF0sIDcpO1xuICAgICAgeFsxM10gXj0gUih4WzEyXSArIHhbMTVdLCA5KTtcbiAgICAgIHhbMTRdIF49IFIoeFsxM10gKyB4WzEyXSwgMTMpO1xuICAgICAgeFsxNV0gXj0gUih4WzE0XSArIHhbMTNdLCAxOCk7XG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSsrKSBCMzJbaV0gKz0geFtpXTtcblxuICAgIGxldCBiaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBiaSA9IGkgKiA0O1xuICAgICAgQltiaSArIDBdID0gKEIzMltpXSA+PiAwKSAmIDB4ZmY7XG4gICAgICBCW2JpICsgMV0gPSAoQjMyW2ldID4+IDgpICYgMHhmZjtcbiAgICAgIEJbYmkgKyAyXSA9IChCMzJbaV0gPj4gMTYpICYgMHhmZjtcbiAgICAgIEJbYmkgKyAzXSA9IChCMzJbaV0gPj4gMjQpICYgMHhmZjtcbiAgICB9XG4gIH1cblxuICBjbGVhbigpIHtcbiAgICB0aGlzLlhZLmZpbGwoMCk7XG4gICAgdGhpcy5WLmZpbGwoMCk7XG4gICAgdGhpcy5fWC5maWxsKDApO1xuICAgIHRoaXMuQi5maWxsKDApO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xuICAgICAgdGhpcy5CMzJbaV0gPSAwO1xuICAgICAgdGhpcy54W2ldID0gMDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNjcnlwdFN5bmMoXG4gIHBhc3N3b3JkOiBIQVNIX0RBVEEsXG4gIHNhbHQ6IEhBU0hfREFUQSxcbiAga2V5bGVuOiBudW1iZXIsXG4gIF9vcHRzPzogT3B0cyxcbik6IEJ1ZmZlciB7XG4gIGNvbnN0IHsgTiwgciwgcCwgbWF4bWVtIH0gPSBmaXhPcHRzKF9vcHRzKTtcblxuICBjb25zdCBibGVuID0gcCAqIDEyOCAqIHI7XG5cbiAgaWYgKDMyICogciAqIChOICsgMikgKiA0ICsgYmxlbiA+IG1heG1lbSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcImV4Y2VkZXMgbWF4IG1lbW9yeVwiKTtcbiAgfVxuXG4gIGNvbnN0IGIgPSBwYmtkZjIocGFzc3dvcmQsIHNhbHQsIDEsIGJsZW4sIFwic2hhMjU2XCIpO1xuXG4gIGNvbnN0IHNjcnlwdFJvbSA9IG5ldyBTY3J5cHRSb20oYiwgciwgTiwgcCk7XG4gIGNvbnN0IG91dCA9IHNjcnlwdFJvbS5ydW4oKTtcblxuICBjb25zdCBmaW4gPSBwYmtkZjIocGFzc3dvcmQsIG91dCwgMSwga2V5bGVuLCBcInNoYTI1NlwiKTtcbiAgc2NyeXB0Um9tLmNsZWFuKCk7XG4gIHJldHVybiBmaW47XG59XG5cbnR5cGUgQ2FsbGJhY2sgPSAoZXJyOiB1bmtub3duLCByZXN1bHQ/OiBCdWZmZXIpID0+IHZvaWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBzY3J5cHQoXG4gIHBhc3N3b3JkOiBIQVNIX0RBVEEsXG4gIHNhbHQ6IEhBU0hfREFUQSxcbiAga2V5bGVuOiBudW1iZXIsXG4gIF9vcHRzOiBPcHRzIHwgbnVsbCB8IENhbGxiYWNrLFxuICBjYj86IENhbGxiYWNrLFxuKSB7XG4gIGlmICghY2IpIHtcbiAgICBjYiA9IF9vcHRzIGFzIENhbGxiYWNrO1xuICAgIF9vcHRzID0gbnVsbDtcbiAgfVxuICBjb25zdCB7IE4sIHIsIHAsIG1heG1lbSB9ID0gZml4T3B0cyhfb3B0cyBhcyBPcHRzKTtcblxuICBjb25zdCBibGVuID0gcCAqIDEyOCAqIHI7XG4gIGlmICgzMiAqIHIgKiAoTiArIDIpICogNCArIGJsZW4gPiBtYXhtZW0pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJleGNlZGVzIG1heCBtZW1vcnlcIik7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IGIgPSBwYmtkZjIocGFzc3dvcmQsIHNhbHQsIDEsIGJsZW4sIFwic2hhMjU2XCIpO1xuXG4gICAgY29uc3Qgc2NyeXB0Um9tID0gbmV3IFNjcnlwdFJvbShiLCByLCBOLCBwKTtcbiAgICBjb25zdCBvdXQgPSBzY3J5cHRSb20ucnVuKCk7XG4gICAgY29uc3QgcmVzdWx0ID0gcGJrZGYyKHBhc3N3b3JkLCBvdXQsIDEsIGtleWxlbiwgXCJzaGEyNTZcIik7XG4gICAgc2NyeXB0Um9tLmNsZWFuKCk7XG4gICAgY2IobnVsbCwgcmVzdWx0KTtcbiAgfSBjYXRjaCAoZXJyOiB1bmtub3duKSB7XG4gICAgcmV0dXJuIGNiKGVycik7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICBzY3J5cHQsXG4gIHNjcnlwdFN5bmMsXG59O1xuIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLDBFQUEwRTtBQUMxRTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztDQXNCQyxHQUVELFNBQVMsTUFBTSxRQUFRLGtCQUFrQjtBQUN6QyxTQUFTLGNBQWMsTUFBTSxRQUFRLGNBQWM7QUFhbkQsTUFBTSxVQUFVLENBQUMsT0FBZ0I7SUFDL0IsTUFBTSxNQUFNO1FBQUUsR0FBRztRQUFPLEdBQUc7UUFBRyxHQUFHO1FBQUcsUUFBUSxNQUFNO0lBQUc7SUFDckQsSUFBSSxDQUFDLE1BQU0sT0FBTztJQUVsQixJQUFJLEtBQUssQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLEtBQUssQ0FBQztTQUNyQixJQUFJLEtBQUssSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLEtBQUssSUFBSTtJQUVyQyxJQUFJLEtBQUssQ0FB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LEVBQUUsR0FBRyxJQUFJLEtBQUs7WUFDbkMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxHQUFHLElBQUksS0FBSztRQUNyQztRQUVBLElBQUssSUFBSSxHQUFHLElBQUksSUFBSSxJQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDLEVBQUU7UUFFdEMsSUFBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUs7WUFDdEIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUN4QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN4QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN4QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFO1lBQ3hCLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDekIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUN6QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFO1lBQ3hCLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEdBQUcsRUFBRTtZQUN6QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxFQUFFO1lBQ3hCLENBQUMsQ0FBQyxHQUFHLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDeEIsQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN6QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDdkIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN2QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxFQUFFO1lBQ3ZCLENBQUMsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLEVBQUU7WUFDdkIsQ0FBQyxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsRUFBRTtZQUN2QixDQUFDLENBQUMsRUFBRSxJQUFJLEVBQUUsQ0FB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